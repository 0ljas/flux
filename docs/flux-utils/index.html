<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Flux Utils | Flux</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Flux"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="Flux Utils is a set of basic utility classes to help get you started with Flux. These base classes are a solid foundation for a simple Flux application, but they are **not** a feature-complete framework that will handle all use cases. There are many other great Flux frameworks out there if these utilities do not fulfill your needs."><meta data-react-helmet="true" property="og:description" content="Flux Utils is a set of basic utility classes to help get you started with Flux. These base classes are a solid foundation for a simple Flux application, but they are **not** a feature-complete framework that will handle all use cases. There are many other great Flux frameworks out there if these utilities do not fulfill your needs."><meta data-react-helmet="true" property="og:url" content="https://facebook.github.io/flux/docs/flux-utils">

<link data-react-helmet="true" rel="shortcut icon" href="/flux/img/favicon.ico">


<link rel="stylesheet" href="/flux/styles.0f289bc5.css">


<link rel="preload" href="/flux/styles.0834a5f5.js" as="script">

<link rel="preload" href="/flux/runtime~main.a428c594.js" as="script">

<link rel="preload" href="/flux/main.7d82687f.js" as="script">

<link rel="preload" href="/flux/1.8134cbd0.js" as="script">

<link rel="preload" href="/flux/2.8c097972.js" as="script">

<link rel="preload" href="/flux/20.c32451da.js" as="script">

<link rel="preload" href="/flux/bf6737ed.81140f07.js" as="script">

<link rel="preload" href="/flux/17896441.cf25d9f7.js" as="script">

<link rel="preload" href="/flux/7937d8e5.8956ffb1.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/flux/"><img class="navbar__logo" src="/flux/img/flux-logo-color.svg" alt="Flux Logo"><strong>Flux</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/flux/"><img class="navbar__logo" src="/flux/img/flux-logo-color.svg" alt="Flux Logo"><strong>Flux</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/flux/img/flux-logo-color.svg" alt="Flux Logo"><strong>Flux</strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Quick Start</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flux/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/flux/docs/in-depth-overview">In-Depth Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flux/docs/dispatcher">Dispatcher</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/flux/docs/flux-utils">Flux Utils</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flux/docs/videos">Videos</a></li><li class="menu__list-item"><a class="menu__link" href="/flux/docs/related-libraries">Related Libraries</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Flux Utils</h1></header><div class="markdown"><p>Flux Utils is a set of basic utility classes to help get you started with Flux. These base classes are a solid foundation for a simple Flux application, but they are <strong>not</strong> a feature-complete framework that will handle all use cases. There are many other great Flux frameworks out there if these utilities do not fulfill your needs.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="usage"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage" title="Direct link to heading">#</a>Usage</h2><p>There are three main classes exposed in Flux Utils:</p><ol><li><code>Store</code></li><li><code>ReduceStore</code></li><li><code>Container</code></li></ol><p>These base classes can be imported from <code>flux/utils</code> like this:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-js codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">ReduceStore</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;flux/utils&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">CounterStore</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ReduceStore</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">getInitialState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">reduce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">action</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> state </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;square&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> state </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword module" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="best-practices"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#best-practices" title="Direct link to heading">#</a>Best practices</h2><p>There are some best practices we try to follow when using these classes:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="stores"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stores" title="Direct link to heading">#</a>Stores</h3><ul><li>Cache data</li><li>Expose public getters to access data (never have public setters)</li><li>Respond to specific actions from the dispatcher</li><li>Always emit a change when their data changes</li><li>Only emit changes during a dispatch</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="actions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#actions" title="Direct link to heading">#</a>Actions</h3><p>Describe a user&#x27;s action, are not setters. (e.g. <code>select-page</code> not <code>set-page-id</code>)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="containers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#containers" title="Direct link to heading">#</a>Containers</h3><ul><li>Are React components that control a view</li><li>Primary job is to gather information from stores and save it in their state</li><li>Have no <code>props</code> and no UI logic</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="views"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#views" title="Direct link to heading">#</a>Views</h3><ul><li>Are React components that are controlled by a container</li><li>Have all of the UI and rendering logic</li><li>Receive all information and callbacks as props</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="api"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#api" title="Direct link to heading">#</a>API</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="store"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#store" title="Direct link to heading">#</a><code>Store</code></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="constructordispatcher-dispatcher"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#constructordispatcher-dispatcher" title="Direct link to heading">#</a><code>constructor(dispatcher: Dispatcher)</code></h4><p>Constructs and registers an instance of this store with the given dispatcher.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="addlistenercallback-function-remove-function"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#addlistenercallback-function-remove-function" title="Direct link to heading">#</a><code>addListener(callback: Function): {remove: Function}</code></h4><p>Adds a listener to the store, when the store changes the given callback will be called. A token is returned that can be used to remove the listener. Calling the <code>remove()</code> function on the returned token will remove the listener.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getdispatcher-dispatcher"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#getdispatcher-dispatcher" title="Direct link to heading">#</a><code>getDispatcher(): Dispatcher</code></h4><p>Returns the dispatcher this store is registered with.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getdispatchtoken-dispatchtoken"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#getdispatchtoken-dispatchtoken" title="Direct link to heading">#</a><code>getDispatchToken(): DispatchToken</code></h4><p>Returns the dispatch token that the dispatcher recognizes this store by. Can be used to <code>waitFor()</code> this store.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="haschanged-boolean"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#haschanged-boolean" title="Direct link to heading">#</a><code>hasChanged(): boolean</code></h4><p>Ask if a store has changed during the current dispatch. Can only be invoked while dispatching. This can be used for constructing derived stores that depend on data from other stores.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="__emitchange-void"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#__emitchange-void" title="Direct link to heading">#</a><code>__emitChange(): void</code></h4><p>Emit an event notifying all listeners that this store has changed. This can only be invoked when dispatching. Changes are de-duplicated and resolved at the end of this store&#x27;s <code>__onDispatch</code> function.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ondispatchpayload-object-void"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ondispatchpayload-object-void" title="Direct link to heading">#</a><code>onDispatch(payload: Object): void</code></h4><p>Subclasses must override this method. This is how the store receives actions from the dispatcher. All state mutation logic must be done during this method.</p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="reducestoret"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#reducestoret" title="Direct link to heading">#</a><code>ReduceStore&lt;T&gt;</code></h3><p>This class extends the base <code>Store</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getstate-t"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#getstate-t" title="Direct link to heading">#</a><code>getState(): T</code></h4><p>Getter that exposes the entire state of this store. If your state is not immutable you should override this and not expose state directly.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getinitialstate-t"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#getinitialstate-t" title="Direct link to heading">#</a><code>getInitialState(): T</code></h4><p>Constructs the initial state for this store. This is called once during construction of the store.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="reducestate-t-action-object-t"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#reducestate-t-action-object-t" title="Direct link to heading">#</a><code>reduce(state: T, action: Object): T</code></h4><p>Reduces the current state, and an action to the new state of this store. All subclasses must implement this method. This method should be pure and have no side-effects.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="areequalone-t-two-t-boolean"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#areequalone-t-two-t-boolean" title="Direct link to heading">#</a><code>areEqual(one: T, two: T): boolean</code></h4><p>Checks if two versions of state are the same. You do not need to override this if your state is immutable.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="doesnt-need-to-emit-a-change"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#doesnt-need-to-emit-a-change" title="Direct link to heading">#</a>Doesn&#x27;t Need to Emit a Change</h4><p>Note that any store that extends <code>ReduceStore</code> does not need to manually emit changes in <code>reduce()</code> (you still can if you want to though). The state is compared before and after each dispatch and changes are emitted automatically. If you need to control this behavior (perhaps because your state is mutable) override <code>areEqual()</code>.</p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="container"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#container" title="Direct link to heading">#</a><code>Container</code></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="createbase-reactclass-options-object-reactclass"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#createbase-reactclass-options-object-reactclass" title="Direct link to heading">#</a><code>create(base: ReactClass, options: ?Object): ReactClass</code></h4><p>Create is used to transform a react class into a container that updates its state when relevant stores change. The provided base class must have static methods <code>getStores()</code> and <code>calculateState()</code>.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-js codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">Container</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;flux/utils&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">CounterContainer</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getStores</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token maybe-class-name">CounterStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">calculateState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">prevState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token maybe-class-name">CounterStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">CounterUI</span><span class="token plain"> counter</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> container </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">CounterContainer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><p>Additional options may be provided when creating your container in order to control certain behaviors.</p><ul><li><p><strong>Containers are pure</strong> - By default containers are pure, meaning they will not re-render when their props and state do not change (as determined by <code>shallowEquals()</code>). To disable this behavior pass options <code>{pure: false}</code> as the second argument to <code>create()</code>.</p></li><li><p><strong>Containers cannot access props</strong> - By default containers are not able to access any props. This is both for performance reasons, and to ensure that containers are re-usable and props do not have to be threaded throughout a component tree. There are some valid situations in which you need to determine your state based on both props and a store&#x27;s state. In those situations pass options <code>{withProps: true}</code> as the second argument to <code>create()</code>. This will expose the components props as the second argument to <code>calculateState()</code>.</p></li></ul><p>If you are unable to utilize react classes most of this functionality is also mirrored in a mixin. <code>import {Mixin} from &#x27;flux/utils&#x27;;</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-flux-with-react-hooks"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-flux-with-react-hooks" title="Direct link to heading">#</a>Using Flux with React Hooks</h2><p>React 16.8 introduced <a href="https://reactjs.org/docs/hooks-intro.html">Hooks</a>. Much of the functionality of Flux and Flux Utils can be reproduced using <a href="https://reactjs.org/docs/hooks-reference.html#usecontext">useContext</a> &amp; <a href="https://reactjs.org/docs/hooks-reference.html#usereducer">useReducer</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="existing-projects-with-storereducestore"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#existing-projects-with-storereducestore" title="Direct link to heading">#</a>Existing Projects with <code>Store</code>/<code>ReduceStore</code></h2><p>If you have existing projects that need to continue using Flux Util&#x27;s Stores, you can use the <a href="https://github.com/Fieldscope/flux-hooks">flux-hooks</a> package.
Access the store using useFluxStore which provides an API similar to <a href="#container">Container</a>&#x27;s calculateState.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/flux/edit/master/docs/../docs/Flux-Utils.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2019-07-05T03:47:37.000Z" class="docLastUpdatedAt_1sqk">7/5/2019</time> by <strong>Yangshun Tay</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/flux/docs/dispatcher"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Dispatcher</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/flux/docs/videos"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Videos »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#usage" class="contents__link">Usage</a></li><li><a href="#best-practices" class="contents__link">Best practices</a><ul><li><a href="#stores" class="contents__link">Stores</a></li><li><a href="#actions" class="contents__link">Actions</a></li><li><a href="#containers" class="contents__link">Containers</a></li><li><a href="#views" class="contents__link">Views</a></li></ul></li><li><a href="#api" class="contents__link">API</a><ul><li><a href="#store" class="contents__link"><code>Store</code></a></li><li><a href="#reducestoret" class="contents__link"><code>ReduceStore&lt;T&gt;</code></a></li><li><a href="#container" class="contents__link"><code>Container</code></a></li></ul></li><li><a href="#using-flux-with-react-hooks" class="contents__link">Using Flux with React Hooks</a></li><li><a href="#existing-projects-with-storereducestore" class="contents__link">Existing Projects with <code>Store</code>/<code>ReduceStore</code></a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></div>Copyright © 2021 Facebook, Inc. Built with Docusaurus.</div></div></footer>
</div>

<script src="/flux/styles.0834a5f5.js"></script>

<script src="/flux/runtime~main.a428c594.js"></script>

<script src="/flux/main.7d82687f.js"></script>

<script src="/flux/1.8134cbd0.js"></script>

<script src="/flux/2.8c097972.js"></script>

<script src="/flux/20.c32451da.js"></script>

<script src="/flux/bf6737ed.81140f07.js"></script>

<script src="/flux/17896441.cf25d9f7.js"></script>

<script src="/flux/7937d8e5.8956ffb1.js"></script>


</body>
</html>